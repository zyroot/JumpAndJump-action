{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\GameCtrl.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,iFAAiF;AACjF,yFAAyF;AACzF,mBAAmB;AACnB,2FAA2F;AAC3F,mGAAmG;AACnG,8BAA8B;AAC9B,2FAA2F;AAC3F,mGAAmG;;AAE7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAA2B,wBAAY;IADvC;QAAA,qEAqGC;QAlGG,SAAS;QAED,gBAAU,GAAe,IAAI,CAAC;QAEtC,gBAAgB;QAER,qBAAe,GAAG,CAAC,CAAC;QAEpB,qBAAe,GAAG,CAAC,CAAC;QAE5B,kBAAkB;QAEV,gBAAU,GAAa,IAAI,CAAC;QACpC,iCAAiC;QAE1B,gBAAU,GAAa,IAAI,CAAC;QAEnC,eAAe;QAEP,gBAAU,GAAc,IAAI,CAAC;;IA+EzC,CAAC;IA/DG,qBAAM,GAAN;QACI,WAAW;QACX,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAC,CAAC,CAAC;QAC3D,QAAQ;QACR,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,UAAU;QACV,uBAAuB;QACvB,OAAO;QACP,IAAI,CAAC,KAAK,GAAG,CAAC,CAAE;IACpB,CAAC;IAAA,CAAC;IAEF,wBAAwB;IACjB,2BAAY,GAAnB;QACI,UAAU;QACV,IAAI,OAAO,GAAC,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC5C,qBAAqB;QACrB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5B,WAAW;QACX,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC;QAC/C,uBAAuB;QACvB,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,OAAO;QACP,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,EAAE,GAAC,CAAC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC;QACvG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;IACnB,CAAC;IACD,SAAS;IACD,iCAAkB,GAA1B;QACI,IAAI,KAAK,GAAG,CAAC,CAAE;QACf,6BAA6B;QAC7B,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,GAAC,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,UAAU,CAAA;QAC9F,yBAAyB;QACzB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAC/B,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,GAAC,IAAI,CAAC;QAC3B,OAAO,EAAE,CAAC,EAAE,CAAC,KAAK,EAAC,KAAK,CAAC,CAAC;IAC9B,CAAC;IAAA,CAAC;IAEF,oBAAK,GAAL;IAEA,CAAC;IAED,qBAAM,GAAN,UAAQ,EAAE;QACN,IAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,EAAC;YAC9B,mBAAmB;YACnB,OAAO;SACV;QACD,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;IACrB,CAAC;IAED,IAAI;IACG,wBAAS,GAAhB;QACI,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;QAChB,uBAAuB;QACvB,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,QAAQ,GAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACxD,QAAQ;QACR,uDAAuD;IAC3D,CAAC;IAED,KAAK;IACG,uBAAQ,GAAhB;QACI,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC,CAAA,iBAAiB;QAClD,iCAAiC;IACrC,CAAC;IA/FD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;4CACkB;IAItC;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;iDACO;IAE5B;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;iDACO;IAI5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACkB;IAGpC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACiB;IAInC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;4CACkB;IArB5B,IAAI;QADhB,OAAO;OACK,IAAI,CAoGhB;IAAD,WAAC;CApGD,AAoGC,CApG0B,EAAE,CAAC,SAAS,GAoGtC;AApGY,oBAAI","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class Game  extends cc.Component {\r\n\r\n    //星星的预制资源\r\n    @property(cc.Prefab)\r\n    private starPrefab : cc.Prefab = null;\r\n\r\n    //星星产生后消失时间的随机范围\r\n    @property(cc.Integer)\r\n    private maxStarDuration = 0;\r\n    @property(cc.Integer)\r\n    private minStarDuration = 0;\r\n\r\n    //地面节点 用于确定星星生成的高度\r\n    @property(cc.Node)\r\n    private groundNode : cc.Node = null;\r\n    //player 节点，用于获取主角弹跳的高度，和控制主角行动开关\r\n    @property(cc.Node)\r\n    public playerNode : cc.Node = null;\r\n\r\n    //score label引用\r\n    @property(cc.Label)\r\n    private scoreLabel : cc.Label = null;\r\n\r\n    //的分音效资源\r\n    // @property(cc.AudioClip)\r\n    // private scoreAudio : cc.AudioClip = null;\r\n\r\n\r\n    //地面节点的y轴坐标\r\n    private groundY: number;\r\n    //定时器\r\n    public timer: number;\r\n    //星星存在的持续时间\r\n    public starDuration: number;\r\n    //当前分数\r\n    private score: number;\r\n\r\n    onLoad () {\r\n        //获取地面的y轴坐标\r\n        this.groundY = this.groundNode.y +this.groundNode.height/2;\r\n        //初始化计时器\r\n        this.timer = 0;\r\n        this.starDuration = 0;\r\n        //生成一个新的星星\r\n        // this.spawnNewStar();\r\n        //初始化积分\r\n        this.score = 0 ;\r\n    };\r\n\r\n    //spawnNewStar  生成一个新的星星\r\n    public spawnNewStar(){\r\n        //生成一个新的节点\r\n        let newStar=cc.instantiate(this.starPrefab);\r\n        //将新增节点添加到 canvas节点下面\r\n        this.node.addChild(newStar);\r\n        //为星星设置随机位置\r\n        newStar.setPosition(this.getNewStarPosition());\r\n        //// 将 Game 组件的实例传入星星组件\r\n        newStar.getComponent('StarCtrl').init(this);\r\n        //重置计时器\r\n        this.starDuration = this.minStarDuration + Math.random()*(this.maxStarDuration - this.minStarDuration);\r\n        this.timer = 0;\r\n    }\r\n    //星星的随机位置\r\n    public  getNewStarPosition(){\r\n        let randx = 0 ;\r\n        //根据地平面位置和主角跳跃高度，随机得到一个星星的y坐标\r\n        let randy = this.groundY + Math.random()*this.playerNode.getComponent('PlayerCtrl').jumpHeight\r\n        //根据屏幕宽度，随机得到一个星星的  x  坐标\r\n        let maxX = this.node.width / 2;\r\n        randx = Math.random()*maxX;\r\n        return cc.v2(randx,randy);\r\n    };\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n        if(this.timer > this.starDuration){\r\n            // this.gameOver();\r\n            return;\r\n        }\r\n        this.timer += dt;\r\n    }\r\n\r\n    //得分\r\n    public gainScore(){\r\n        this.score += 1;\r\n        //更新sorelabel  label的文字\r\n        this.scoreLabel.string = 'Score:'+this.score.toString();\r\n        //播放得分音效\r\n        // cc.audioEngine.play(this.scoreAudio as any,false,1);\r\n    }\r\n\r\n    // gg\r\n    private gameOver(){\r\n        this.playerNode.stopAllActions();//停止player节点跳跃的动作\r\n        // cc.director.loadScene('Game');\r\n    }\r\n}\r\n"]}